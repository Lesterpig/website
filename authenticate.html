<!DOCTYPE html>

<html>

  <head>
    <meta charset="UTF-8">
    <title>Mopidy</title>
    <link rel="stylesheet" type="text/css" href="media/style/fonts.css">
    <link rel="stylesheet" type="text/css" href="media/style/mopidy.css">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-15510432-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>

  <body>

    <div class="box focus">
      <h1>Authenticate Mopidy</h1>

      <p>
      Some services require you to get authentication tokens for Mopidy so that
      it can connect to your service accounts. This page helps you on the way.
      </p>
    </div>

    <div class="box" id="soundcloud">
      <div class="icon soundcloud">
        <img src="media/images/soundcloud-80x50.png" width="80"
          height="50" alt="SoundCloud">
      </div>

      <h2>SoundCloud</h2>

      <script src="//connect.soundcloud.com/sdk.js"></script>
      <script>
        SC.initialize({
          client_id: "93e33e327fd8a9b77becd179652272e2",
          redirect_uri: "http://www.mopidy.com/soundcloud_callback",
        });
        function auth_soundcloud () {
          SC.connect(function() {
            SC.get("/me", function(user, error) {
              if (error) {
                alert("Error: " + error.message);
              } else {
                var input = document.querySelector("#soundcloud input");
                input.value = SC.accessToken();
                input.disabled = false;
              }
            });
          });
        }
      </script>

      <p>
      If you want to use the SoundCloud extension, you must first authenticate
      your Mopidy installation to access your SoundCloud account.
      </p>

      <ol>
        <li>
          <a href="#soundcloud" onclick="javascript:auth_soundcloud()">
            <img src="http://connect.soundcloud.com/2/btn-connect-sc-l.png"
              alt="Connect with SoundCloud"></a>

          <p>No information is shared with the Mopidy web site.</p>
        </li>
        <li>
          Get your auth token here:
          <input type="text" disabled placeholder="Connect to get a token">
        </li>
        <li>Add the token to the <tt>soundcloud/auth_token</tt> config value in
        your <tt>mopidy.conf</tt> file.</li>
      </ol>

      <p>For more information see the
      <a href="https://github.com/dz0ny/mopidy-soundcloud/">
      Mopidy-SoundCloud docs</a>.</p>
    </div>
  </body>
</html>
